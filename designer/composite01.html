<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="CommonUtil.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			//组合模式
			
			var Org=function( name ){
				this.name=name;
				this.depts=[];
			};
			Org.prototype={
				constructor: Org,
				addDepts: function( child ){
					this.depts.push(child);
					return this;
				},
				getDepts: function(){
					return this.depts;
				}
			};
			var Dept=function( name ){
				this.name=name;
				this.persons=[];
			};
			Dept.prototype={
				constructor: Dept,
				addPerson: function( child ){
					this.persons.push(child);
					return this;
				},
				getPoersons: function(){
					return this.persons;
				}
			}
			
			var Person=function( name ){
				this.name=name;
			};
			
			Person.prototype={
				constructor: Person,
				hardWorking: function(){
					document.write(this.name+'努力工作');
				},
				sleeping: function(){
					document.write(this.name+'sleep');
				}
			}

			var p1=new Person('张1');
			var p2=new Person('张2');
			var p3=new Person('张3');
			var p4=new Person('张4');
			var p5=new Person('张5');
			var p6=new Person('张6');

			var depet1=new Dept('开发部门');
			var depet2=new Dept('销售部门');
			depet1.addPerson(p1).addPerson(p2).addPerson(p3).addPerson(p4);
			depet2.addPerson(p5).addPerson(p2).addPerson(p6);
			
			var org1=new Org('bjsxt');
			org1.addDepts(depet1).addDepts(depet2);
			
			//org1.getDepts();
			
			for( var i=0,depts=org1.getDepts(); i<depts.length; ++i ){
				for( var j=0,persons=depts[i].getPoersons(); j<persons.length; ++j ){
					if(persons[j].name === 'ryo' ){
						persons[j].hardWorking();
					};
				};
			};
			
		</script>
	</head>
	<body>
	</body>
</html>
